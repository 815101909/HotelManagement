2025-05-30 00:01:36.706 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:01:36.707 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:01:36.725 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:01:36.725 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:01:36.728 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:01:36.728 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:01:36.728 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:01:36.728 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:01:36.729 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:01:36.731 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:01:36.732 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:01:36.736 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:01:36.737 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:01:36.737 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:01:36.740 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:01:36.741 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:01:36.741 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:01:36.742 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:01:36.752 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:01:36.753 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:01:36.755 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:01:36.756 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:01:36.758 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:01:36.760 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:01:36.762 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:01:36.762 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:01:36.765 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:01:36.765 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:01:36.766 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:01:36.769 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:01:36.769 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:01:36.771 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:01:36.772 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:26:23.722 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-30 00:26:23.744 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-30 00:26:23.752 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-30 00:26:51.243 [main] INFO  c.e.h.HotelManagementApplication - Starting HotelManagementApplication using Java 1.8.0_331 on LAPTOP-6LBVHJ60 with PID 18092 (D:\LearnProject\HotelManagement\target\classes started by 815101909 in D:\LearnProject\HotelManagement)
2025-05-30 00:26:51.246 [main] DEBUG c.e.h.HotelManagementApplication - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-05-30 00:26:51.247 [main] INFO  c.e.h.HotelManagementApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-30 00:26:51.916 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-30 00:26:51.950 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 JPA repository interfaces.
2025-05-30 00:26:52.465 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-30 00:26:52.466 [main] INFO  o.a.c.core.AprLifecycleListener - An older version [1.2.35] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [1.2.38]
2025-05-30 00:26:52.466 [main] INFO  o.a.c.core.AprLifecycleListener - Loaded Apache Tomcat Native library [1.2.35] using APR version [1.7.0].
2025-05-30 00:26:52.466 [main] INFO  o.a.c.core.AprLifecycleListener - APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [true].
2025-05-30 00:26:52.466 [main] INFO  o.a.c.core.AprLifecycleListener - APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2025-05-30 00:26:52.494 [main] INFO  o.a.c.core.AprLifecycleListener - OpenSSL successfully initialized [OpenSSL 1.1.1q  5 Jul 2022]
2025-05-30 00:26:52.501 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-30 00:26:52.503 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-30 00:26:52.503 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-05-30 00:26:52.823 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-30 00:26:52.823 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1530 ms
2025-05-30 00:26:52.918 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-30 00:27:02.163 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-30 00:27:02.249 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-30 00:27:02.311 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2025-05-30 00:27:02.474 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-05-30 00:27:02.571 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-05-30 00:27:02.726 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-05-30 00:27:02.738 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-30 00:27:02.958 [main] INFO  c.e.h.s.impl.BookingServiceImpl - 初始化订单表结构...
2025-05-30 00:27:02.985 [main] DEBUG c.e.h.s.impl.BookingServiceImpl - payment_status字段已存在
2025-05-30 00:27:02.987 [main] DEBUG c.e.h.s.impl.BookingServiceImpl - synced_to_finance字段已存在
2025-05-30 00:27:02.991 [main] INFO  c.e.h.s.impl.BookingServiceImpl - 更新自动删除income记录的触发器
2025-05-30 00:27:03.015 [main] INFO  c.e.h.s.impl.BookingServiceImpl - 触发器更新成功
2025-05-30 00:27:03.015 [main] INFO  c.e.h.s.impl.BookingServiceImpl - 订单表结构初始化完成
2025-05-30 00:27:03.075 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-30 00:27:03.329 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-30 00:27:03.342 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-30 00:27:03.351 [main] INFO  c.e.h.HotelManagementApplication - Started HotelManagementApplication in 12.572 seconds (JVM running for 20.332)
2025-05-30 00:30:50.430 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-30 00:30:50.433 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-30 00:30:50.442 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-30 00:31:03.524 [main] INFO  c.e.h.HotelManagementApplication - Starting HotelManagementApplication using Java 1.8.0_331 on LAPTOP-6LBVHJ60 with PID 42072 (D:\LearnProject\HotelManagement\target\classes started by 815101909 in D:\LearnProject\HotelManagement)
2025-05-30 00:31:03.526 [main] DEBUG c.e.h.HotelManagementApplication - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-05-30 00:31:03.527 [main] INFO  c.e.h.HotelManagementApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-30 00:31:04.067 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-30 00:31:04.083 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 JPA repository interfaces.
2025-05-30 00:31:04.512 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-30 00:31:04.512 [main] INFO  o.a.c.core.AprLifecycleListener - An older version [1.2.35] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [1.2.38]
2025-05-30 00:31:04.512 [main] INFO  o.a.c.core.AprLifecycleListener - Loaded Apache Tomcat Native library [1.2.35] using APR version [1.7.0].
2025-05-30 00:31:04.513 [main] INFO  o.a.c.core.AprLifecycleListener - APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [true].
2025-05-30 00:31:04.513 [main] INFO  o.a.c.core.AprLifecycleListener - APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2025-05-30 00:31:04.524 [main] INFO  o.a.c.core.AprLifecycleListener - OpenSSL successfully initialized [OpenSSL 1.1.1q  5 Jul 2022]
2025-05-30 00:31:04.530 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-30 00:31:04.531 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-30 00:31:04.532 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-05-30 00:31:04.737 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-30 00:31:04.737 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1177 ms
2025-05-30 00:31:04.809 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-30 00:31:09.733 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-30 00:31:09.806 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-30 00:31:09.850 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2025-05-30 00:31:09.973 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-05-30 00:31:10.061 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-05-30 00:31:10.178 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-05-30 00:31:10.190 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-30 00:31:10.394 [main] INFO  c.e.h.s.impl.BookingServiceImpl - 初始化订单表结构...
2025-05-30 00:31:10.413 [main] DEBUG c.e.h.s.impl.BookingServiceImpl - payment_status字段已存在
2025-05-30 00:31:10.415 [main] DEBUG c.e.h.s.impl.BookingServiceImpl - synced_to_finance字段已存在
2025-05-30 00:31:10.416 [main] INFO  c.e.h.s.impl.BookingServiceImpl - 更新自动删除income记录的触发器
2025-05-30 00:31:10.436 [main] INFO  c.e.h.s.impl.BookingServiceImpl - 触发器更新成功
2025-05-30 00:31:10.436 [main] INFO  c.e.h.s.impl.BookingServiceImpl - 订单表结构初始化完成
2025-05-30 00:31:10.520 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-30 00:31:10.835 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-30 00:31:10.846 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-30 00:31:10.853 [main] INFO  c.e.h.HotelManagementApplication - Started HotelManagementApplication in 7.701 seconds (JVM running for 17.852)
2025-05-30 00:43:24.463 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-30 00:43:24.463 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-30 00:43:24.464 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-05-30 00:43:24.568 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:43:24.568 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:43:24.580 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:43:24.580 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:43:24.597 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:43:24.597 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:43:24.597 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:43:24.597 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:43:24.601 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:43:24.603 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:43:24.603 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:43:24.607 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:43:24.608 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:43:24.608 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:43:24.610 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:43:24.611 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:43:24.611 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:43:24.612 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:43:24.659 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:43:24.659 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:43:24.661 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:43:24.661 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:43:24.661 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:43:24.663 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:43:24.665 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:43:24.665 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:43:24.667 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:43:24.667 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:43:24.667 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:43:24.670 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:43:24.670 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:43:24.670 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:43:24.672 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 00:43:25.553 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 00:43:25.553 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 00:43:25.556 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 01:16:46.083 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-30 01:16:46.088 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-30 01:16:46.115 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-30 16:27:34.128 [main] INFO  c.e.h.HotelManagementApplication - Starting HotelManagementApplication using Java 1.8.0_331 on LAPTOP-6LBVHJ60 with PID 3276 (D:\LearnProject\HotelManagement\target\classes started by 815101909 in D:\LearnProject\HotelManagement)
2025-05-30 16:27:34.130 [main] DEBUG c.e.h.HotelManagementApplication - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-05-30 16:27:34.131 [main] INFO  c.e.h.HotelManagementApplication - No active profile set, falling back to 1 default profile: "default"
2025-05-30 16:27:34.754 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-30 16:27:34.780 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 JPA repository interfaces.
2025-05-30 16:27:35.264 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)
2025-05-30 16:27:35.265 [main] INFO  o.a.c.core.AprLifecycleListener - An older version [1.2.35] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [1.2.38]
2025-05-30 16:27:35.265 [main] INFO  o.a.c.core.AprLifecycleListener - Loaded Apache Tomcat Native library [1.2.35] using APR version [1.7.0].
2025-05-30 16:27:35.265 [main] INFO  o.a.c.core.AprLifecycleListener - APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [true].
2025-05-30 16:27:35.265 [main] INFO  o.a.c.core.AprLifecycleListener - APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2025-05-30 16:27:35.296 [main] INFO  o.a.c.core.AprLifecycleListener - OpenSSL successfully initialized [OpenSSL 1.1.1q  5 Jul 2022]
2025-05-30 16:27:35.302 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-30 16:27:35.303 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-30 16:27:35.303 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-05-30 16:27:35.522 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-30 16:27:35.522 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1355 ms
2025-05-30 16:27:35.603 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-30 16:27:51.519 [main] ERROR com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Exception during pool initialization.
com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:175)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:446)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:364)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:206)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:476)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:115)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:159)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:117)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:330)
	at org.springframework.boot.jdbc.EmbeddedDatabaseConnection.isEmbedded(EmbeddedDatabaseConnection.java:164)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.isEmbeddedDatabase(DataSourceScriptDatabaseInitializer.java:70)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.isEnabled(AbstractScriptDatabaseInitializer.java:83)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:106)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applySchemaScripts(AbstractScriptDatabaseInitializer.java:97)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:75)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:65)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:322)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1168)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:919)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:591)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:732)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:409)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1300)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1289)
	at com.example.hotelmanagement.HotelManagementApplication.main(HotelManagementApplication.java:9)
Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:62)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)
	at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:150)
	at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:166)
	at com.mysql.cj.protocol.a.NativeProtocol.negotiateSSLConnection(NativeProtocol.java:379)
	at com.mysql.cj.protocol.a.NativeAuthenticationProvider.connect(NativeAuthenticationProvider.java:206)
	at com.mysql.cj.protocol.a.NativeProtocol.connect(NativeProtocol.java:1430)
	at com.mysql.cj.NativeSession.connect(NativeSession.java:134)
	at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:945)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)
	... 41 common frames omitted
Caused by: java.net.SocketException: Software caused connection abort: recv failed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:475)
	at sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:469)
	at sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:159)
	at sun.security.ssl.SSLTransport.decode(SSLTransport.java:111)
	at sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1315)
	at sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1228)
	at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:412)
	at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:384)
	at com.mysql.cj.protocol.ExportControlled.performTlsHandshake(ExportControlled.java:347)
	at com.mysql.cj.protocol.StandardSocketFactory.performTlsHandshake(StandardSocketFactory.java:191)
	at com.mysql.cj.protocol.a.NativeSocketConnection.performTlsHandshake(NativeSocketConnection.java:101)
	at com.mysql.cj.protocol.a.NativeProtocol.negotiateSSLConnection(NativeProtocol.java:370)
	... 46 common frames omitted
2025-05-30 16:27:51.523 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-30 16:27:51.656 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-30 16:27:51.751 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-30 16:27:51.821 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 5.6.15.Final
2025-05-30 16:27:52.010 [main] INFO  o.h.annotations.common.Version - HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2025-05-30 16:27:52.183 [main] INFO  org.hibernate.dialect.Dialect - HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2025-05-30 16:27:52.445 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-05-30 16:27:52.470 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-30 16:27:52.725 [main] INFO  c.e.h.s.impl.BookingServiceImpl - 初始化订单表结构...
2025-05-30 16:27:52.792 [main] DEBUG c.e.h.s.impl.BookingServiceImpl - payment_status字段已存在
2025-05-30 16:27:52.794 [main] DEBUG c.e.h.s.impl.BookingServiceImpl - synced_to_finance字段已存在
2025-05-30 16:27:52.802 [main] INFO  c.e.h.s.impl.BookingServiceImpl - 更新自动删除income记录的触发器
2025-05-30 16:27:52.847 [main] INFO  c.e.h.s.impl.BookingServiceImpl - 触发器更新成功
2025-05-30 16:27:52.847 [main] INFO  c.e.h.s.impl.BookingServiceImpl - 订单表结构初始化完成
2025-05-30 16:27:52.939 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-30 16:27:53.210 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-30 16:27:53.224 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''
2025-05-30 16:27:53.233 [main] INFO  c.e.h.HotelManagementApplication - Started HotelManagementApplication in 19.504 seconds (JVM running for 34.452)
2025-05-30 16:27:53.528 [http-nio-8080-exec-4] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-30 16:27:53.528 [http-nio-8080-exec-4] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-30 16:27:53.529 [http-nio-8080-exec-4] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-05-30 16:27:53.644 [http-nio-8080-exec-4] DEBUG c.e.h.m.AdminMapper.findByUsername - ==>  Preparing: SELECT * FROM admin WHERE username = ?
2025-05-30 16:27:53.655 [http-nio-8080-exec-4] DEBUG c.e.h.m.AdminMapper.findByUsername - ==> Parameters: admin(String)
2025-05-30 16:27:53.666 [http-nio-8080-exec-4] DEBUG c.e.h.m.AdminMapper.findByUsername - <==      Total: 1
2025-05-30 16:27:53.750 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:27:53.750 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:27:53.754 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:27:53.759 [http-nio-8080-exec-1] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:27:53.759 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:27:53.759 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:27:53.765 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:27:53.789 [http-nio-8080-exec-6] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:27:53.790 [http-nio-8080-exec-6] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:27:53.790 [http-nio-8080-exec-6] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:27:53.796 [http-nio-8080-exec-6] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:27:53.828 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:27:53.828 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:27:53.833 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:27:53.833 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:27:53.833 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:27:53.837 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:27:53.867 [http-nio-8080-exec-5] INFO  c.e.h.controller.FinanceController - 

=================== 获取财务详情 ===================
2025-05-30 16:27:53.868 [http-nio-8080-exec-5] INFO  c.e.h.controller.FinanceController - 收到前端参数: startDate=null, endDate=null
2025-05-30 16:27:53.868 [http-nio-8080-exec-5] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:27:53.869 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:27:53.869 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:27:53.872 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:27:53.872 [http-nio-8080-exec-5] INFO  c.e.h.controller.FinanceController - 获取到 8 条预订记录
2025-05-30 16:27:53.872 [http-nio-8080-exec-5] INFO  c.e.h.controller.FinanceController - 筛选出 8 条已付款预订
2025-05-30 16:27:53.872 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:53.873 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:27:53.874 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:53.874 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:53.874 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:27:53.875 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:53.875 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:53.876 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:27:53.876 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:53.877 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:53.877 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:27:53.878 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:53.879 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:53.879 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:27:53.880 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:53.880 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:53.880 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:27:53.881 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:53.882 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:53.882 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:27:53.883 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:53.884 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:53.884 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:27:53.885 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:53.889 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==>  Preparing: SELECT * FROM expense ORDER BY expense_date DESC
2025-05-30 16:27:53.890 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==> Parameters: 
2025-05-30 16:27:53.896 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.ExpenseMapper.findAll - <==      Total: 12
2025-05-30 16:27:53.931 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:27:53.932 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:27:53.935 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:27:53.936 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:27:53.936 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:27:53.936 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:27:53.938 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:27:53.938 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:27:53.939 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:27:53.939 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:27:53.941 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:27:53.942 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:27:53.942 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:27:53.942 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:27:53.943 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:27:53.944 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:27:53.944 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:27:53.944 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:27:53.946 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:27:53.946 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:27:53.946 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:27:53.946 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:27:53.948 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:27:53.949 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:27:53.949 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:27:53.949 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:27:53.950 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:27:53.951 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:27:53.951 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:27:53.951 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:27:53.953 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:27:53.980 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:27:53.980 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:27:53.981 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:27:53.983 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:27:53.983 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:53.984 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:27:53.985 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:53.985 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:53.985 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:27:53.986 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:53.986 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:53.987 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:27:53.987 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:53.987 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:53.988 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:27:53.988 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:53.988 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:53.988 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:27:53.989 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:53.989 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:53.990 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:27:53.990 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:53.991 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:53.991 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:27:53.993 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:53.993 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:53.993 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:27:53.993 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:54.021 [http-nio-8080-exec-9] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询未同步到财务系统的已付款订单
2025-05-30 16:27:54.022 [http-nio-8080-exec-9] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==>  Preparing: SELECT * FROM booking WHERE payment_status IN ('PAID', 'paid', '已付款') AND (synced_to_finance IS NULL OR synced_to_finance = 0)
2025-05-30 16:27:54.022 [http-nio-8080-exec-9] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==> Parameters: 
2025-05-30 16:27:54.023 [http-nio-8080-exec-9] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - <==      Total: 0
2025-05-30 16:27:54.023 [http-nio-8080-exec-9] INFO  c.e.h.s.impl.BookingServiceImpl - 找到 0 个未同步到财务系统的已付款订单
2025-05-30 16:27:54.023 [http-nio-8080-exec-9] INFO  c.e.h.controller.FinanceController - 找到 0 条未同步的已付款预订记录
2025-05-30 16:27:54.049 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:27:54.049 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:27:54.049 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:27:54.051 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:27:54.051 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:54.052 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:27:54.052 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:54.053 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:54.053 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:27:54.054 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:54.054 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:54.054 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:27:54.054 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:54.055 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:54.055 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:27:54.056 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:54.056 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:54.056 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:27:54.056 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:54.057 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:54.057 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:27:54.057 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:54.057 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:54.057 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:27:54.058 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:54.059 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:27:54.059 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:27:54.060 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:27:54.084 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:27:54.084 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:27:54.084 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:27:54.086 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:27:54.091 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:27:54.091 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:27:54.093 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:28:34.226 [http-nio-8080-exec-4] INFO  c.e.h.controller.FinanceController - 获取到10条收入记录
2025-05-30 16:28:34.332 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==>  Preparing: SELECT * FROM expense ORDER BY expense_date DESC
2025-05-30 16:28:34.332 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==> Parameters: 
2025-05-30 16:28:34.338 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.ExpenseMapper.findAll - <==      Total: 12
2025-05-30 16:28:34.418 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:34.418 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:34.418 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:34.419 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:34.419 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:34.419 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:34.421 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:34.421 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:34.421 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:28:34.421 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:34.422 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:34.422 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:28:34.422 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:34.422 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:34.422 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:34.424 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:34.425 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:34.425 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:28:34.425 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:34.426 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:34.426 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:28:34.426 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:34.427 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:34.427 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:28:34.427 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:34.427 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:34.427 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:34.428 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:34.478 [http-nio-8080-exec-5] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:34.478 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:34.478 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:34.480 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:34.481 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:28:34.481 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:28:34.481 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:28:41.965 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:28:41.966 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:28:41.967 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:28:41.968 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:41.968 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:41.969 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:41.971 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:41.995 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:28:41.996 [http-nio-8080-exec-7] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:28:41.996 [http-nio-8080-exec-7] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:28:42.006 [http-nio-8080-exec-7] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:28:42.034 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:28:42.035 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:28:42.037 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:28:42.038 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:28:42.038 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:28:42.041 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:28:42.058 [http-nio-8080-exec-8] INFO  c.e.h.controller.FinanceController - 

=================== 获取财务详情 ===================
2025-05-30 16:28:42.058 [http-nio-8080-exec-8] INFO  c.e.h.controller.FinanceController - 收到前端参数: startDate=null, endDate=null
2025-05-30 16:28:42.058 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:42.058 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:42.058 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:42.061 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:42.063 [http-nio-8080-exec-8] INFO  c.e.h.controller.FinanceController - 获取到 8 条预订记录
2025-05-30 16:28:42.063 [http-nio-8080-exec-8] INFO  c.e.h.controller.FinanceController - 筛选出 8 条已付款预订
2025-05-30 16:28:42.063 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.064 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:42.065 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.066 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.066 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:28:42.067 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.067 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.067 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:28:42.068 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.068 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.068 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:42.069 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.070 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.070 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:28:42.071 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.071 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.071 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:28:42.073 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.074 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.074 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:28:42.075 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.075 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.075 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:42.076 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.076 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==>  Preparing: SELECT * FROM expense ORDER BY expense_date DESC
2025-05-30 16:28:42.076 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==> Parameters: 
2025-05-30 16:28:42.080 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.ExpenseMapper.findAll - <==      Total: 12
2025-05-30 16:28:42.098 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:28:42.098 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:28:42.099 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:28:42.100 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:42.100 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:42.100 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:42.102 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:42.102 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:42.102 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:42.102 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:42.104 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:42.104 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:42.104 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:42.104 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:42.107 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:42.107 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:42.107 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:42.107 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:42.109 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:42.109 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:42.109 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:42.109 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:42.111 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:42.111 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:42.111 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:42.112 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:42.113 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:42.113 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:42.113 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:42.113 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:42.116 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:42.139 [http-nio-8080-exec-4] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:42.139 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:42.139 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:42.142 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:42.142 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.142 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:42.144 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.145 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.145 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:28:42.146 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.147 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.147 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:28:42.148 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.148 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.149 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:42.149 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.150 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.150 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:28:42.151 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.151 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.151 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:28:42.152 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.152 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.153 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:28:42.154 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.154 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.154 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:42.156 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.171 [http-nio-8080-exec-1] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询未同步到财务系统的已付款订单
2025-05-30 16:28:42.171 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==>  Preparing: SELECT * FROM booking WHERE payment_status IN ('PAID', 'paid', '已付款') AND (synced_to_finance IS NULL OR synced_to_finance = 0)
2025-05-30 16:28:42.171 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==> Parameters: 
2025-05-30 16:28:42.172 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - <==      Total: 0
2025-05-30 16:28:42.173 [http-nio-8080-exec-1] INFO  c.e.h.s.impl.BookingServiceImpl - 找到 0 个未同步到财务系统的已付款订单
2025-05-30 16:28:42.173 [http-nio-8080-exec-1] INFO  c.e.h.controller.FinanceController - 找到 0 条未同步的已付款预订记录
2025-05-30 16:28:42.188 [http-nio-8080-exec-6] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:42.189 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:42.189 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:42.191 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:42.191 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.191 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:42.192 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.192 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.192 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:28:42.194 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.195 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.195 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:28:42.196 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.196 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.197 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:42.198 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.198 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.198 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:28:42.200 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.201 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.201 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:28:42.202 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.202 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.202 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:28:42.204 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.204 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:42.204 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:42.205 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:42.224 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:42.226 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:42.226 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:42.227 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:42.227 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:28:42.228 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:28:42.230 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:28:45.333 [http-nio-8080-exec-5] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:28:45.335 [http-nio-8080-exec-5] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:28:45.335 [http-nio-8080-exec-5] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:28:45.338 [http-nio-8080-exec-5] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:28:45.342 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:28:45.343 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:28:45.344 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:28:46.194 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:28:46.195 [http-nio-8080-exec-7] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:28:46.195 [http-nio-8080-exec-7] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:28:46.201 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:28:46.201 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:28:46.201 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:28:46.201 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:28:46.201 [http-nio-8080-exec-7] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:28:46.206 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:28:46.212 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:28:46.856 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:28:46.857 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:28:46.859 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:28:46.860 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:28:46.860 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:28:46.862 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:28:46.862 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:28:46.862 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:28:46.864 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:28:46.870 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:28:46.870 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:28:46.872 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:28:46.872 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:28:46.873 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:28:46.874 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:28:46.875 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:28:46.875 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:28:46.877 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:28:46.895 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:28:46.896 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:28:46.898 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:28:46.899 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:28:46.899 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:28:46.901 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:28:46.903 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:28:46.903 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:28:46.907 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:28:46.907 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:28:46.908 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:28:46.911 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:28:46.912 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:28:46.913 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:28:46.916 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:28:50.476 [http-nio-8080-exec-6] INFO  c.e.h.controller.FinanceController - 获取到10条收入记录
2025-05-30 16:28:50.489 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==>  Preparing: SELECT * FROM expense ORDER BY expense_date DESC
2025-05-30 16:28:50.489 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==> Parameters: 
2025-05-30 16:28:50.491 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.ExpenseMapper.findAll - <==      Total: 12
2025-05-30 16:28:50.556 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:50.556 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:50.557 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:50.560 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:50.561 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:50.563 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:50.565 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:50.565 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:50.565 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:28:50.567 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:50.568 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:50.568 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:28:50.569 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:50.570 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:50.570 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:50.571 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:50.572 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:50.572 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:28:50.575 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:50.575 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:50.575 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:28:50.578 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:50.578 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:50.578 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:28:50.579 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:50.581 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:50.581 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:50.582 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:50.597 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:50.598 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:50.598 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:50.601 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:50.602 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:28:50.602 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:28:50.603 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:28:58.665 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:28:58.665 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:28:58.668 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:28:58.668 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:58.668 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:58.668 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:58.671 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:58.688 [http-nio-8080-exec-9] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:28:58.689 [http-nio-8080-exec-9] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:28:58.689 [http-nio-8080-exec-9] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:28:58.695 [http-nio-8080-exec-9] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:28:58.706 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:28:58.707 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:28:58.708 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:28:58.709 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:28:58.709 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:28:58.710 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:28:58.732 [http-nio-8080-exec-4] INFO  c.e.h.controller.FinanceController - 

=================== 获取财务详情 ===================
2025-05-30 16:28:58.732 [http-nio-8080-exec-4] INFO  c.e.h.controller.FinanceController - 收到前端参数: startDate=null, endDate=null
2025-05-30 16:28:58.732 [http-nio-8080-exec-4] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:58.732 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:58.732 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:58.734 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:58.734 [http-nio-8080-exec-4] INFO  c.e.h.controller.FinanceController - 获取到 8 条预订记录
2025-05-30 16:28:58.734 [http-nio-8080-exec-4] INFO  c.e.h.controller.FinanceController - 筛选出 8 条已付款预订
2025-05-30 16:28:58.734 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.734 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:58.735 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.735 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.735 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:28:58.735 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.736 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.736 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:28:58.737 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.737 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.737 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:58.738 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.739 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.739 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:28:58.740 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.740 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.741 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:28:58.742 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.742 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.742 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:28:58.744 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.745 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.745 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:58.746 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.747 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==>  Preparing: SELECT * FROM expense ORDER BY expense_date DESC
2025-05-30 16:28:58.747 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==> Parameters: 
2025-05-30 16:28:58.749 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.ExpenseMapper.findAll - <==      Total: 12
2025-05-30 16:28:58.765 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:28:58.765 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:28:58.766 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:28:58.766 [http-nio-8080-exec-1] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:58.766 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:58.766 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:58.767 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:58.768 [http-nio-8080-exec-1] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:58.768 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:58.768 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:58.769 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:58.770 [http-nio-8080-exec-1] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:58.770 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:58.770 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:58.771 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:58.772 [http-nio-8080-exec-1] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:58.772 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:58.772 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:58.773 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:58.773 [http-nio-8080-exec-1] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:58.773 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:58.773 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:58.774 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:58.774 [http-nio-8080-exec-1] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:58.774 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:58.774 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:58.777 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:58.777 [http-nio-8080-exec-1] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:58.777 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:58.777 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:58.778 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:58.792 [http-nio-8080-exec-6] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:58.792 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:58.792 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:58.794 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:58.794 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.794 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:58.796 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.796 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.796 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:28:58.797 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.797 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.798 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:28:58.799 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.799 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.800 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:58.801 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.801 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.801 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:28:58.802 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.802 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.802 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:28:58.803 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.803 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.803 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:28:58.806 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.808 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.808 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:58.811 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.835 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询未同步到财务系统的已付款订单
2025-05-30 16:28:58.835 [http-nio-8080-exec-2] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==>  Preparing: SELECT * FROM booking WHERE payment_status IN ('PAID', 'paid', '已付款') AND (synced_to_finance IS NULL OR synced_to_finance = 0)
2025-05-30 16:28:58.836 [http-nio-8080-exec-2] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==> Parameters: 
2025-05-30 16:28:58.837 [http-nio-8080-exec-2] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - <==      Total: 0
2025-05-30 16:28:58.837 [http-nio-8080-exec-2] INFO  c.e.h.s.impl.BookingServiceImpl - 找到 0 个未同步到财务系统的已付款订单
2025-05-30 16:28:58.837 [http-nio-8080-exec-2] INFO  c.e.h.controller.FinanceController - 找到 0 条未同步的已付款预订记录
2025-05-30 16:28:58.856 [http-nio-8080-exec-5] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:58.856 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:58.856 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:58.857 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:58.858 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.858 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:58.859 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.860 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.860 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:28:58.861 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.861 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.862 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:28:58.862 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.863 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.863 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:58.864 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.864 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.864 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:28:58.864 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.866 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.866 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:28:58.867 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.868 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.868 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:28:58.869 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.869 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:28:58.869 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:28:58.870 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:28:58.887 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:28:58.888 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:28:58.888 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:28:58.890 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:28:58.891 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:28:58.891 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:28:58.892 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:29:04.722 [http-nio-8080-exec-7] INFO  c.e.h.controller.FinanceController - 获取到10条收入记录
2025-05-30 16:29:04.738 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==>  Preparing: SELECT * FROM expense ORDER BY expense_date DESC
2025-05-30 16:29:04.738 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==> Parameters: 
2025-05-30 16:29:04.742 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.ExpenseMapper.findAll - <==      Total: 12
2025-05-30 16:29:04.792 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:04.792 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:04.792 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:04.794 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:04.794 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:04.795 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:04.797 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:04.797 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:04.798 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:04.799 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:04.800 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:04.800 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:04.801 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:04.801 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:04.801 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:04.802 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:04.802 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:04.803 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:29:04.803 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:04.804 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:04.804 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:04.806 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:04.806 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:04.806 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:04.807 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:04.808 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:04.808 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:04.808 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:04.822 [http-nio-8080-exec-4] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:04.822 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:04.822 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:04.824 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:04.824 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:29:04.824 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:29:04.827 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:29:10.010 [http-nio-8080-exec-1] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:29:10.011 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:29:10.012 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:29:10.013 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:10.013 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:29:10.013 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:29:10.013 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:10.015 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:29:10.016 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:29:10.017 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:10.808 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:10.808 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:10.810 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:10.811 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:10.811 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:10.813 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:10.813 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:10.814 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:10.815 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:10.816 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:10.816 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:10.817 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:10.819 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:10.819 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:10.821 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:10.821 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:10.821 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:10.823 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:10.844 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:10.845 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:10.847 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:10.847 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:10.847 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:10.849 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:10.850 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:10.850 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:10.852 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:10.852 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:10.853 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:10.854 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:10.855 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:10.855 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:10.857 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:12.181 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:29:12.181 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:29:12.182 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:29:12.183 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:12.183 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:12.183 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:12.185 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:12.208 [http-nio-8080-exec-9] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:29:12.208 [http-nio-8080-exec-9] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:29:12.209 [http-nio-8080-exec-9] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:29:12.212 [http-nio-8080-exec-9] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:29:12.234 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:12.235 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:12.237 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:12.238 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:12.238 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:12.239 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:12.254 [http-nio-8080-exec-4] INFO  c.e.h.controller.FinanceController - 

=================== 获取财务详情 ===================
2025-05-30 16:29:12.254 [http-nio-8080-exec-4] INFO  c.e.h.controller.FinanceController - 收到前端参数: startDate=null, endDate=null
2025-05-30 16:29:12.254 [http-nio-8080-exec-4] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:12.254 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:12.254 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:12.255 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:12.255 [http-nio-8080-exec-4] INFO  c.e.h.controller.FinanceController - 获取到 8 条预订记录
2025-05-30 16:29:12.255 [http-nio-8080-exec-4] INFO  c.e.h.controller.FinanceController - 筛选出 8 条已付款预订
2025-05-30 16:29:12.257 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.257 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:12.257 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.258 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.258 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:12.258 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.260 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.260 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:12.260 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.261 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.261 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:12.261 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.262 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.262 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:29:12.262 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.263 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.263 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:12.263 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.263 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.264 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:12.264 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.264 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.264 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:12.265 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.265 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==>  Preparing: SELECT * FROM expense ORDER BY expense_date DESC
2025-05-30 16:29:12.265 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==> Parameters: 
2025-05-30 16:29:12.267 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.ExpenseMapper.findAll - <==      Total: 12
2025-05-30 16:29:12.286 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:29:12.287 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:29:12.287 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:29:12.287 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:12.287 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:12.288 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:12.289 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:12.289 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:12.289 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:12.289 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:12.291 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:12.291 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:12.291 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:12.291 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:12.292 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:12.292 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:12.293 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:12.293 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:12.294 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:12.294 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:12.294 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:12.294 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:12.296 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:12.296 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:12.297 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:12.297 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:12.298 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:12.298 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:12.298 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:12.298 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:12.299 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:12.317 [http-nio-8080-exec-6] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:12.317 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:12.317 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:12.319 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:12.319 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.319 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:12.321 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.321 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.321 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:12.322 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.322 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.323 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:12.323 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.323 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.323 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:12.324 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.324 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.324 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:29:12.326 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.326 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.326 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:12.328 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.328 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.328 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:12.330 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.330 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.330 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:12.330 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.349 [http-nio-8080-exec-1] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询未同步到财务系统的已付款订单
2025-05-30 16:29:12.349 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==>  Preparing: SELECT * FROM booking WHERE payment_status IN ('PAID', 'paid', '已付款') AND (synced_to_finance IS NULL OR synced_to_finance = 0)
2025-05-30 16:29:12.349 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==> Parameters: 
2025-05-30 16:29:12.351 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - <==      Total: 0
2025-05-30 16:29:12.351 [http-nio-8080-exec-1] INFO  c.e.h.s.impl.BookingServiceImpl - 找到 0 个未同步到财务系统的已付款订单
2025-05-30 16:29:12.351 [http-nio-8080-exec-1] INFO  c.e.h.controller.FinanceController - 找到 0 条未同步的已付款预订记录
2025-05-30 16:29:12.366 [http-nio-8080-exec-5] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:12.367 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:12.367 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:12.368 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:12.369 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.369 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:12.370 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.370 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.370 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:12.371 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.371 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.371 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:12.372 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.372 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.372 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:12.373 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.373 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.374 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:29:12.375 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.375 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.375 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:12.376 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.376 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.376 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:12.377 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.378 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:12.378 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:12.378 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:12.396 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:12.396 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:12.396 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:12.398 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:12.399 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:29:12.399 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:29:12.400 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:29:14.718 [http-nio-8080-exec-7] INFO  c.e.h.controller.FinanceController - 获取到10条收入记录
2025-05-30 16:29:14.744 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==>  Preparing: SELECT * FROM expense ORDER BY expense_date DESC
2025-05-30 16:29:14.744 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==> Parameters: 
2025-05-30 16:29:14.747 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.ExpenseMapper.findAll - <==      Total: 12
2025-05-30 16:29:14.811 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:14.811 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:14.811 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:14.813 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:14.813 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:14.813 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:14.815 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:14.815 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:14.815 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:14.816 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:14.816 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:14.816 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:14.817 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:14.818 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:14.818 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:14.819 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:14.820 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:14.820 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:29:14.821 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:14.821 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:14.821 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:14.822 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:14.823 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:14.823 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:14.824 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:14.824 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:14.824 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:14.825 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:14.847 [http-nio-8080-exec-4] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:14.847 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:14.848 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:14.849 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:14.849 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:29:14.850 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:29:14.851 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:29:24.199 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:29:24.199 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:29:24.200 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:29:24.200 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:24.202 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:24.202 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:24.204 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:24.224 [http-nio-8080-exec-6] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:29:24.224 [http-nio-8080-exec-6] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:29:24.224 [http-nio-8080-exec-6] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:29:24.227 [http-nio-8080-exec-6] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:29:24.244 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:24.244 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:24.245 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:24.246 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:24.246 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:24.247 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:24.263 [http-nio-8080-exec-5] INFO  c.e.h.controller.FinanceController - 

=================== 获取财务详情 ===================
2025-05-30 16:29:24.264 [http-nio-8080-exec-5] INFO  c.e.h.controller.FinanceController - 收到前端参数: startDate=null, endDate=null
2025-05-30 16:29:24.264 [http-nio-8080-exec-5] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:24.264 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:24.264 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:24.265 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:24.265 [http-nio-8080-exec-5] INFO  c.e.h.controller.FinanceController - 获取到 8 条预订记录
2025-05-30 16:29:24.266 [http-nio-8080-exec-5] INFO  c.e.h.controller.FinanceController - 筛选出 8 条已付款预订
2025-05-30 16:29:24.266 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.266 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:24.266 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.268 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.268 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:24.269 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.269 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.269 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:24.270 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.270 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.270 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:24.271 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.271 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.271 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:29:24.272 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.272 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.272 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:24.273 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.273 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.273 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:24.274 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.274 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.274 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:24.275 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.275 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==>  Preparing: SELECT * FROM expense ORDER BY expense_date DESC
2025-05-30 16:29:24.275 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==> Parameters: 
2025-05-30 16:29:24.276 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.ExpenseMapper.findAll - <==      Total: 12
2025-05-30 16:29:24.290 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:29:24.290 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:29:24.291 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:29:24.291 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:24.292 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:24.292 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:24.293 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:24.293 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:24.293 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:24.293 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:24.294 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:24.294 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:24.294 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:24.294 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:24.295 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:24.295 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:24.295 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:24.295 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:24.296 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:24.296 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:24.297 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:24.297 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:24.297 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:24.298 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:24.298 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:24.298 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:24.299 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:24.299 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:24.299 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:24.299 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:24.300 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:24.315 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:24.315 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:24.315 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:24.316 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:24.316 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.317 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:24.317 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.318 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.318 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:24.318 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.318 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.318 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:24.320 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.320 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.321 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:24.321 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.322 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.322 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:29:24.322 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.322 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.322 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:24.323 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.323 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.323 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:24.324 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.324 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.324 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:24.325 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.335 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询未同步到财务系统的已付款订单
2025-05-30 16:29:24.336 [http-nio-8080-exec-8] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==>  Preparing: SELECT * FROM booking WHERE payment_status IN ('PAID', 'paid', '已付款') AND (synced_to_finance IS NULL OR synced_to_finance = 0)
2025-05-30 16:29:24.336 [http-nio-8080-exec-8] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==> Parameters: 
2025-05-30 16:29:24.337 [http-nio-8080-exec-8] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - <==      Total: 0
2025-05-30 16:29:24.337 [http-nio-8080-exec-8] INFO  c.e.h.s.impl.BookingServiceImpl - 找到 0 个未同步到财务系统的已付款订单
2025-05-30 16:29:24.337 [http-nio-8080-exec-8] INFO  c.e.h.controller.FinanceController - 找到 0 条未同步的已付款预订记录
2025-05-30 16:29:24.351 [http-nio-8080-exec-9] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:24.351 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:24.351 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:24.352 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:24.353 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.353 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:24.353 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.354 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.354 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:24.354 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.354 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.355 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:24.355 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.355 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.355 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:24.356 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.356 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.357 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:29:24.357 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.357 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.357 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:24.358 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.359 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.359 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:24.359 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.359 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:24.359 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:24.360 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:24.375 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:24.375 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:24.375 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:24.376 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:24.376 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:29:24.377 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:29:24.377 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:29:25.454 [http-nio-8080-exec-4] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:29:25.454 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:29:25.454 [http-nio-8080-exec-4] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:29:25.454 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:29:25.454 [http-nio-8080-exec-4] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:29:25.455 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:29:25.456 [http-nio-8080-exec-4] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:29:26.611 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:29:26.611 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:29:26.613 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:29:26.613 [http-nio-8080-exec-6] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:26.614 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:26.614 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:26.615 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:26.630 [http-nio-8080-exec-1] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:29:26.630 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:29:26.630 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:29:26.633 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:29:26.653 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:26.653 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:26.655 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:26.656 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:26.656 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:26.657 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:26.679 [http-nio-8080-exec-3] INFO  c.e.h.controller.FinanceController - 

=================== 获取财务详情 ===================
2025-05-30 16:29:26.679 [http-nio-8080-exec-3] INFO  c.e.h.controller.FinanceController - 收到前端参数: startDate=null, endDate=null
2025-05-30 16:29:26.679 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:26.680 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:26.680 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:26.681 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:26.681 [http-nio-8080-exec-3] INFO  c.e.h.controller.FinanceController - 获取到 8 条预订记录
2025-05-30 16:29:26.681 [http-nio-8080-exec-3] INFO  c.e.h.controller.FinanceController - 筛选出 8 条已付款预订
2025-05-30 16:29:26.682 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.682 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:26.682 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.682 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.682 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:26.683 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.683 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.683 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:26.684 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.685 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.685 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:26.685 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.685 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.686 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:29:26.686 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.686 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.686 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:26.687 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.687 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.687 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:26.688 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.688 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.688 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:26.688 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.689 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==>  Preparing: SELECT * FROM expense ORDER BY expense_date DESC
2025-05-30 16:29:26.689 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==> Parameters: 
2025-05-30 16:29:26.690 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.ExpenseMapper.findAll - <==      Total: 12
2025-05-30 16:29:26.707 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:29:26.707 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:29:26.709 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:29:26.709 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:26.709 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:26.709 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:26.710 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:26.710 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:26.710 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:26.710 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:26.711 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:26.711 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:26.712 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:26.712 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:26.712 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:26.713 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:26.713 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:26.713 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:26.714 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:26.714 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:26.714 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:26.715 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:26.715 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:26.716 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:26.716 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:26.716 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:26.717 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:26.717 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:26.717 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:26.717 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:26.718 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:26.737 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:26.737 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:26.737 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:26.738 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:26.738 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.739 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:26.739 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.740 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.740 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:26.741 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.741 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.741 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:26.742 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.742 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.742 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:26.743 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.743 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.743 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:29:26.743 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.743 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.743 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:26.744 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.746 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.746 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:26.747 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.747 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.747 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:26.748 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.763 [http-nio-8080-exec-9] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询未同步到财务系统的已付款订单
2025-05-30 16:29:26.764 [http-nio-8080-exec-9] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==>  Preparing: SELECT * FROM booking WHERE payment_status IN ('PAID', 'paid', '已付款') AND (synced_to_finance IS NULL OR synced_to_finance = 0)
2025-05-30 16:29:26.764 [http-nio-8080-exec-9] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==> Parameters: 
2025-05-30 16:29:26.765 [http-nio-8080-exec-9] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - <==      Total: 0
2025-05-30 16:29:26.765 [http-nio-8080-exec-9] INFO  c.e.h.s.impl.BookingServiceImpl - 找到 0 个未同步到财务系统的已付款订单
2025-05-30 16:29:26.765 [http-nio-8080-exec-9] INFO  c.e.h.controller.FinanceController - 找到 0 条未同步的已付款预订记录
2025-05-30 16:29:26.780 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:26.780 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:26.781 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:26.782 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:26.782 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.782 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:26.783 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.783 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.783 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:26.783 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.783 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.785 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:26.785 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.785 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.785 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:26.786 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.786 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.786 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:29:26.787 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.787 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.788 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:26.789 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.789 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.789 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:26.789 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.790 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:26.790 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:26.790 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:26.808 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:26.808 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:26.808 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:26.809 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:26.809 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:29:26.809 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:29:26.810 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:29:28.599 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:28.600 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:28.601 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:28.608 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:28.608 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:28.610 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:28.610 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:28.610 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:28.612 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:28.613 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:28.613 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:28.614 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:28.615 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:28.615 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:28.616 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:28.617 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:28.617 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:28.618 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:28.636 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:28.637 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:28.639 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:28.639 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:28.639 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:28.641 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:28.643 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:28.643 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:28.644 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:28.645 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:28.645 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:28.647 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:28.647 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:28.647 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:28.649 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:29.881 [http-nio-8080-exec-5] INFO  c.e.h.controller.FinanceController - 获取到10条收入记录
2025-05-30 16:29:29.897 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==>  Preparing: SELECT * FROM expense ORDER BY expense_date DESC
2025-05-30 16:29:29.897 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==> Parameters: 
2025-05-30 16:29:29.899 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.ExpenseMapper.findAll - <==      Total: 12
2025-05-30 16:29:29.940 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:29.941 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:29.941 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:29.942 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:29.942 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:29.942 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:29.943 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:29.943 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:29.943 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:29.944 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:29.945 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:29.945 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:29.945 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:29.946 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:29.946 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:29.947 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:29.947 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:29.947 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:29:29.948 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:29.948 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:29.948 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:29.948 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:29.949 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:29.949 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:29.950 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:29.950 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:29.951 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:29.951 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:29.966 [http-nio-8080-exec-9] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:29.967 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:29.967 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:29.968 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:29.969 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:29:29.969 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:29:29.970 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:29:36.074 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:29:36.075 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:29:36.076 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:29:36.083 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:29:36.084 [http-nio-8080-exec-2] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:29:36.084 [http-nio-8080-exec-2] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:29:36.087 [http-nio-8080-exec-2] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:29:37.243 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:29:37.243 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:29:37.244 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:29:37.244 [http-nio-8080-exec-4] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:37.245 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:37.245 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:37.246 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:37.260 [http-nio-8080-exec-6] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:29:37.261 [http-nio-8080-exec-6] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:29:37.261 [http-nio-8080-exec-6] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:29:37.262 [http-nio-8080-exec-6] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:29:37.276 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:37.277 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:37.278 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:37.279 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:37.279 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:37.281 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:37.296 [http-nio-8080-exec-5] INFO  c.e.h.controller.FinanceController - 

=================== 获取财务详情 ===================
2025-05-30 16:29:37.296 [http-nio-8080-exec-5] INFO  c.e.h.controller.FinanceController - 收到前端参数: startDate=null, endDate=null
2025-05-30 16:29:37.296 [http-nio-8080-exec-5] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:37.296 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:37.296 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:37.298 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:37.299 [http-nio-8080-exec-5] INFO  c.e.h.controller.FinanceController - 获取到 8 条预订记录
2025-05-30 16:29:37.299 [http-nio-8080-exec-5] INFO  c.e.h.controller.FinanceController - 筛选出 8 条已付款预订
2025-05-30 16:29:37.299 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.299 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:37.300 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.300 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.300 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:37.301 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.301 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.301 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:37.302 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.302 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.303 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:37.303 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.304 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.304 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:29:37.304 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.304 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.305 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:37.305 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.305 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.305 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:37.306 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.306 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.306 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:37.308 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.309 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==>  Preparing: SELECT * FROM expense ORDER BY expense_date DESC
2025-05-30 16:29:37.309 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==> Parameters: 
2025-05-30 16:29:37.311 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.ExpenseMapper.findAll - <==      Total: 12
2025-05-30 16:29:37.330 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:29:37.330 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:29:37.331 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:29:37.331 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:37.331 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:37.332 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:37.333 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:37.333 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:37.334 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:37.334 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:37.335 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:37.335 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:37.335 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:37.335 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:37.336 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:37.336 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:37.336 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:37.336 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:37.338 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:37.339 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:37.339 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:37.339 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:37.340 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:37.341 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:37.341 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:37.341 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:37.342 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:37.342 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:37.342 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:37.342 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:37.343 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:37.360 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:37.361 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:37.361 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:37.362 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:37.363 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.364 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:37.365 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.365 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.365 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:37.365 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.365 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.365 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:37.366 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.366 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.366 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:37.367 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.367 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.367 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:29:37.368 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.368 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.369 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:37.369 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.369 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.370 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:37.370 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.370 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.370 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:37.371 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.390 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询未同步到财务系统的已付款订单
2025-05-30 16:29:37.391 [http-nio-8080-exec-8] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==>  Preparing: SELECT * FROM booking WHERE payment_status IN ('PAID', 'paid', '已付款') AND (synced_to_finance IS NULL OR synced_to_finance = 0)
2025-05-30 16:29:37.391 [http-nio-8080-exec-8] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==> Parameters: 
2025-05-30 16:29:37.392 [http-nio-8080-exec-8] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - <==      Total: 0
2025-05-30 16:29:37.392 [http-nio-8080-exec-8] INFO  c.e.h.s.impl.BookingServiceImpl - 找到 0 个未同步到财务系统的已付款订单
2025-05-30 16:29:37.392 [http-nio-8080-exec-8] INFO  c.e.h.controller.FinanceController - 找到 0 条未同步的已付款预订记录
2025-05-30 16:29:37.408 [http-nio-8080-exec-9] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:37.409 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:37.409 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:37.410 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:37.411 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.411 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:37.412 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.412 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.413 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:37.413 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.414 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.414 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:37.414 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.414 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.415 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:37.415 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.415 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.415 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:29:37.417 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.417 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.417 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:37.418 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.418 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.418 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:37.418 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.418 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:37.420 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:37.420 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:37.432 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:37.433 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:37.433 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:37.434 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:37.434 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:29:37.434 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:29:37.436 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:29:45.945 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:29:45.946 [http-nio-8080-exec-2] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:29:45.947 [http-nio-8080-exec-2] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:29:45.948 [http-nio-8080-exec-2] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:29:56.878 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:56.878 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:56.878 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:56.879 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:56.879 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:56.880 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:56.880 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:56.880 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:56.881 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:56.882 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:56.882 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:56.884 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:56.885 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:56.885 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:56.886 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:56.886 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:56.886 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:56.887 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:56.899 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:56.899 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:56.901 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:56.901 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:56.901 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:56.904 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:56.904 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:56.904 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:56.906 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:56.906 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:56.906 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:56.907 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:56.908 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:29:56.908 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:29:56.909 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:29:57.711 [http-nio-8080-exec-5] INFO  c.e.h.controller.FinanceController - 获取到10条收入记录
2025-05-30 16:29:57.727 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==>  Preparing: SELECT * FROM expense ORDER BY expense_date DESC
2025-05-30 16:29:57.728 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==> Parameters: 
2025-05-30 16:29:57.730 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.ExpenseMapper.findAll - <==      Total: 12
2025-05-30 16:29:57.776 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:57.776 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:57.777 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:57.777 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:57.778 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:57.778 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:57.778 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:57.779 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:57.779 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:57.779 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:57.779 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:57.779 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:57.781 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:57.781 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:57.781 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:57.782 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:57.782 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:57.782 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:29:57.782 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:57.783 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:57.783 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:29:57.783 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:57.783 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:57.783 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:29:57.784 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:57.784 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:29:57.784 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:29:57.785 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:29:57.799 [http-nio-8080-exec-9] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:29:57.800 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:29:57.800 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:29:57.801 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:29:57.801 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:29:57.801 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:29:57.802 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:30:25.942 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:30:25.944 [http-nio-8080-exec-10] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:30:25.944 [http-nio-8080-exec-10] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:30:25.946 [http-nio-8080-exec-10] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:30:36.931 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:30:36.932 [http-nio-8080-exec-2] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:30:36.932 [http-nio-8080-exec-2] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:30:36.934 [http-nio-8080-exec-2] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:30:45.946 [http-nio-8080-exec-4] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:30:45.947 [http-nio-8080-exec-4] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:30:45.947 [http-nio-8080-exec-4] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:30:45.949 [http-nio-8080-exec-4] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:31:25.935 [http-nio-8080-exec-6] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:31:25.935 [http-nio-8080-exec-6] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:31:25.936 [http-nio-8080-exec-6] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:31:25.938 [http-nio-8080-exec-6] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:31:33.703 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:31:33.704 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:31:33.704 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:31:33.705 [http-nio-8080-exec-1] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:31:33.705 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:31:33.705 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:31:33.707 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:31:33.729 [http-nio-8080-exec-5] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:31:33.729 [http-nio-8080-exec-5] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:31:33.729 [http-nio-8080-exec-5] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:31:33.731 [http-nio-8080-exec-5] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:31:33.743 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:31:33.743 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:31:33.745 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:31:33.745 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:31:33.745 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:31:33.746 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:31:33.755 [http-nio-8080-exec-7] INFO  c.e.h.controller.FinanceController - 

=================== 获取财务详情 ===================
2025-05-30 16:31:33.755 [http-nio-8080-exec-7] INFO  c.e.h.controller.FinanceController - 收到前端参数: startDate=null, endDate=null
2025-05-30 16:31:33.755 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:31:33.756 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:31:33.756 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:31:33.757 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:31:33.757 [http-nio-8080-exec-7] INFO  c.e.h.controller.FinanceController - 获取到 8 条预订记录
2025-05-30 16:31:33.757 [http-nio-8080-exec-7] INFO  c.e.h.controller.FinanceController - 筛选出 8 条已付款预订
2025-05-30 16:31:33.758 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.758 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:31:33.758 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.759 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.759 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:31:33.760 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.760 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.760 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:31:33.761 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.761 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.761 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:31:33.763 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.763 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.763 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:31:33.764 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.764 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.764 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:31:33.765 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.766 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.766 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:31:33.767 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.767 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.767 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:31:33.768 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.768 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==>  Preparing: SELECT * FROM expense ORDER BY expense_date DESC
2025-05-30 16:31:33.768 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==> Parameters: 
2025-05-30 16:31:33.770 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.ExpenseMapper.findAll - <==      Total: 12
2025-05-30 16:31:33.783 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:31:33.784 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:31:33.784 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:31:33.785 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:31:33.785 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:31:33.785 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:31:33.786 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:31:33.786 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:31:33.786 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:31:33.786 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:31:33.787 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:31:33.787 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:31:33.788 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:31:33.788 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:31:33.789 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:31:33.789 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:31:33.789 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:31:33.789 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:31:33.790 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:31:33.790 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:31:33.790 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:31:33.790 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:31:33.791 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:31:33.791 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:31:33.791 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:31:33.791 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:31:33.792 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:31:33.792 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:31:33.792 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:31:33.792 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:31:33.794 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:31:33.805 [http-nio-8080-exec-9] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:31:33.805 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:31:33.805 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:31:33.807 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:31:33.807 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.807 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:31:33.808 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.808 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.808 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:31:33.809 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.809 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.809 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:31:33.810 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.810 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.810 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:31:33.811 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.811 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.811 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:31:33.813 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.813 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.813 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:31:33.814 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.814 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.814 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:31:33.815 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.815 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.815 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:31:33.816 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.828 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询未同步到财务系统的已付款订单
2025-05-30 16:31:33.829 [http-nio-8080-exec-10] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==>  Preparing: SELECT * FROM booking WHERE payment_status IN ('PAID', 'paid', '已付款') AND (synced_to_finance IS NULL OR synced_to_finance = 0)
2025-05-30 16:31:33.829 [http-nio-8080-exec-10] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==> Parameters: 
2025-05-30 16:31:33.830 [http-nio-8080-exec-10] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - <==      Total: 0
2025-05-30 16:31:33.830 [http-nio-8080-exec-10] INFO  c.e.h.s.impl.BookingServiceImpl - 找到 0 个未同步到财务系统的已付款订单
2025-05-30 16:31:33.831 [http-nio-8080-exec-10] INFO  c.e.h.controller.FinanceController - 找到 0 条未同步的已付款预订记录
2025-05-30 16:31:33.844 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:31:33.845 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:31:33.845 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:31:33.847 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:31:33.847 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.847 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:31:33.848 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.849 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.849 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:31:33.850 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.850 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.850 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:31:33.852 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.852 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.852 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:31:33.853 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.853 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.853 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:31:33.854 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.854 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.854 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:31:33.855 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.855 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.855 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:31:33.856 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.856 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:31:33.856 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:31:33.857 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:31:33.867 [http-nio-8080-exec-4] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:31:33.867 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:31:33.867 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:31:33.869 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:31:33.869 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:31:33.870 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:31:33.870 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:31:36.077 [http-nio-8080-exec-6] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:31:36.078 [http-nio-8080-exec-6] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:31:36.078 [http-nio-8080-exec-6] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:31:36.081 [http-nio-8080-exec-6] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:31:45.945 [http-nio-8080-exec-1] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:31:45.946 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:31:45.947 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:31:45.948 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:32:25.932 [http-nio-8080-exec-5] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:32:25.933 [http-nio-8080-exec-5] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:32:25.933 [http-nio-8080-exec-5] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:32:25.936 [http-nio-8080-exec-5] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:32:36.936 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:32:36.937 [http-nio-8080-exec-3] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:32:36.937 [http-nio-8080-exec-3] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:32:36.938 [http-nio-8080-exec-3] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:32:45.940 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:32:45.941 [http-nio-8080-exec-7] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:32:45.941 [http-nio-8080-exec-7] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:32:45.944 [http-nio-8080-exec-7] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:32:49.034 [http-nio-8080-exec-8] INFO  c.e.h.controller.FinanceController - 获取到10条收入记录
2025-05-30 16:32:49.056 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==>  Preparing: SELECT * FROM expense ORDER BY expense_date DESC
2025-05-30 16:32:49.056 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==> Parameters: 
2025-05-30 16:32:49.060 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.ExpenseMapper.findAll - <==      Total: 12
2025-05-30 16:32:49.132 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:32:49.132 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:32:49.132 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:32:49.133 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:32:49.133 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:32:49.133 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:32:49.133 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:32:49.134 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:32:49.134 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:32:49.135 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:32:49.135 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:32:49.135 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:32:49.136 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:32:49.136 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:32:49.136 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:32:49.136 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:32:49.136 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:32:49.136 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:32:49.137 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:32:49.137 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:32:49.137 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:32:49.138 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:32:49.138 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:32:49.138 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:32:49.138 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:32:49.138 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:32:49.138 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:32:49.139 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:32:49.172 [http-nio-8080-exec-4] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:32:49.172 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:32:49.172 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:32:49.173 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:32:49.174 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:32:49.174 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:32:49.174 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:33:25.947 [http-nio-8080-exec-6] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:33:25.947 [http-nio-8080-exec-6] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:33:25.947 [http-nio-8080-exec-6] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:33:25.949 [http-nio-8080-exec-6] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:33:36.932 [http-nio-8080-exec-1] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:33:36.932 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:33:36.932 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:33:36.934 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:33:45.958 [http-nio-8080-exec-5] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:33:45.959 [http-nio-8080-exec-5] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:33:45.960 [http-nio-8080-exec-5] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:33:45.963 [http-nio-8080-exec-5] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:34:19.353 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:34:19.353 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:34:19.354 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:34:19.354 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:19.354 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:19.354 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:19.355 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:19.392 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:34:19.392 [http-nio-8080-exec-7] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:34:19.394 [http-nio-8080-exec-7] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:34:19.396 [http-nio-8080-exec-7] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:34:19.412 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:34:19.412 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:34:19.414 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:34:19.414 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:34:19.414 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:34:19.415 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:34:19.436 [http-nio-8080-exec-9] INFO  c.e.h.controller.FinanceController - 

=================== 获取财务详情 ===================
2025-05-30 16:34:19.436 [http-nio-8080-exec-9] INFO  c.e.h.controller.FinanceController - 收到前端参数: startDate=Thu May 01 00:00:00 CST 2025, endDate=Sat May 31 00:00:00 CST 2025
2025-05-30 16:34:19.437 [http-nio-8080-exec-9] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:19.437 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:19.438 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:19.439 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:19.439 [http-nio-8080-exec-9] INFO  c.e.h.controller.FinanceController - 获取到 8 条预订记录
2025-05-30 16:34:19.440 [http-nio-8080-exec-9] INFO  c.e.h.controller.FinanceController - 筛选出 8 条已付款预订
2025-05-30 16:34:19.440 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.440 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:19.442 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.442 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.443 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:19.443 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.444 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.444 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:19.445 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.445 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.446 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:19.447 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.447 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.447 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:34:19.448 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.449 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.449 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:19.449 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.449 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.449 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:19.450 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.450 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.450 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:19.451 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.453 [http-nio-8080-exec-9] DEBUG c.e.h.m.E.findByDateRange - ==>  Preparing: SELECT * FROM expense WHERE expense_date >= ? AND expense_date < ? ORDER BY expense_date DESC
2025-05-30 16:34:19.453 [http-nio-8080-exec-9] DEBUG c.e.h.m.E.findByDateRange - ==> Parameters: 2025-05-01 00:00:00.0(Timestamp), 2025-06-01 00:00:00.0(Timestamp)
2025-05-30 16:34:19.462 [http-nio-8080-exec-9] DEBUG c.e.h.m.E.findByDateRange - <==      Total: 12
2025-05-30 16:34:19.475 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:34:19.475 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:34:19.476 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:34:19.476 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:19.476 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:19.476 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:19.477 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:19.477 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:19.477 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:19.477 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:19.478 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:19.479 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:19.479 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:19.479 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:19.479 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:19.480 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:19.480 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:19.480 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:19.480 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:19.481 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:19.481 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:19.481 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:19.482 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:19.482 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:19.483 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:19.483 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:19.484 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:19.484 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:19.484 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:19.484 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:19.485 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:19.498 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:19.498 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:19.498 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:19.499 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:19.499 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.500 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:19.500 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.501 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.501 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:19.501 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.501 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.501 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:19.502 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.502 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.502 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:19.503 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.503 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.503 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:34:19.504 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.504 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.504 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:19.504 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.505 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.505 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:19.505 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.505 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.505 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:19.506 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.519 [http-nio-8080-exec-4] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询未同步到财务系统的已付款订单
2025-05-30 16:34:19.520 [http-nio-8080-exec-4] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==>  Preparing: SELECT * FROM booking WHERE payment_status IN ('PAID', 'paid', '已付款') AND (synced_to_finance IS NULL OR synced_to_finance = 0)
2025-05-30 16:34:19.520 [http-nio-8080-exec-4] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==> Parameters: 
2025-05-30 16:34:19.521 [http-nio-8080-exec-4] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - <==      Total: 0
2025-05-30 16:34:19.521 [http-nio-8080-exec-4] INFO  c.e.h.s.impl.BookingServiceImpl - 找到 0 个未同步到财务系统的已付款订单
2025-05-30 16:34:19.521 [http-nio-8080-exec-4] INFO  c.e.h.controller.FinanceController - 找到 0 条未同步的已付款预订记录
2025-05-30 16:34:19.536 [http-nio-8080-exec-6] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:19.536 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:19.536 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:19.537 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:19.537 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.537 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:19.538 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.538 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.538 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:19.539 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.539 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.540 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:19.540 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.540 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.540 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:19.541 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.541 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.541 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:34:19.541 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.541 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.541 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:19.543 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.543 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.543 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:19.544 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.544 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:19.544 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:19.544 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:19.559 [http-nio-8080-exec-1] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:19.559 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:19.559 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:19.561 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:19.561 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:34:19.561 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:34:19.563 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:34:21.358 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:34:21.358 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:34:21.359 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:34:21.359 [http-nio-8080-exec-5] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:21.359 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:21.359 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:21.360 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:21.442 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:34:21.443 [http-nio-8080-exec-3] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:34:21.443 [http-nio-8080-exec-3] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:34:21.445 [http-nio-8080-exec-3] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:34:21.512 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:34:21.512 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:34:21.514 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:34:21.514 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:34:21.514 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:34:21.516 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:34:21.531 [http-nio-8080-exec-8] INFO  c.e.h.controller.FinanceController - 

=================== 获取财务详情 ===================
2025-05-30 16:34:21.531 [http-nio-8080-exec-8] INFO  c.e.h.controller.FinanceController - 收到前端参数: startDate=Thu May 01 00:00:00 CST 2025, endDate=Sat May 31 00:00:00 CST 2025
2025-05-30 16:34:21.531 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:21.532 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:21.532 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:21.533 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:21.534 [http-nio-8080-exec-8] INFO  c.e.h.controller.FinanceController - 获取到 8 条预订记录
2025-05-30 16:34:21.534 [http-nio-8080-exec-8] INFO  c.e.h.controller.FinanceController - 筛选出 8 条已付款预订
2025-05-30 16:34:21.534 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.534 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:21.535 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.535 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.535 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:21.536 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.536 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.536 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:21.537 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.537 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.537 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:21.537 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.538 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.538 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:34:21.538 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.539 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.539 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:21.540 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.540 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.540 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:21.541 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.541 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.541 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:21.541 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.542 [http-nio-8080-exec-8] DEBUG c.e.h.m.E.findByDateRange - ==>  Preparing: SELECT * FROM expense WHERE expense_date >= ? AND expense_date < ? ORDER BY expense_date DESC
2025-05-30 16:34:21.542 [http-nio-8080-exec-8] DEBUG c.e.h.m.E.findByDateRange - ==> Parameters: 2025-05-01 00:00:00.0(Timestamp), 2025-06-01 00:00:00.0(Timestamp)
2025-05-30 16:34:21.543 [http-nio-8080-exec-8] DEBUG c.e.h.m.E.findByDateRange - <==      Total: 12
2025-05-30 16:34:21.559 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:34:21.559 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:34:21.560 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:34:21.560 [http-nio-8080-exec-9] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:21.560 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:21.561 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:21.561 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:21.562 [http-nio-8080-exec-9] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:21.562 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:21.562 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:21.562 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:21.563 [http-nio-8080-exec-9] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:21.563 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:21.563 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:21.564 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:21.564 [http-nio-8080-exec-9] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:21.564 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:21.564 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:21.565 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:21.565 [http-nio-8080-exec-9] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:21.565 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:21.565 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:21.566 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:21.566 [http-nio-8080-exec-9] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:21.567 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:21.567 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:21.567 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:21.567 [http-nio-8080-exec-9] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:21.568 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:21.568 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:21.569 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:21.585 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:21.585 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:21.585 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:21.586 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:21.586 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.587 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:21.587 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.589 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.589 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:21.590 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.590 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.590 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:21.590 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.590 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.590 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:21.591 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.591 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.591 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:34:21.592 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.592 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.592 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:21.593 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.593 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.593 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:21.594 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.594 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.594 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:21.594 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.615 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询未同步到财务系统的已付款订单
2025-05-30 16:34:21.615 [http-nio-8080-exec-2] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==>  Preparing: SELECT * FROM booking WHERE payment_status IN ('PAID', 'paid', '已付款') AND (synced_to_finance IS NULL OR synced_to_finance = 0)
2025-05-30 16:34:21.615 [http-nio-8080-exec-2] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==> Parameters: 
2025-05-30 16:34:21.615 [http-nio-8080-exec-2] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - <==      Total: 0
2025-05-30 16:34:21.616 [http-nio-8080-exec-2] INFO  c.e.h.s.impl.BookingServiceImpl - 找到 0 个未同步到财务系统的已付款订单
2025-05-30 16:34:21.616 [http-nio-8080-exec-2] INFO  c.e.h.controller.FinanceController - 找到 0 条未同步的已付款预订记录
2025-05-30 16:34:21.659 [http-nio-8080-exec-4] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:21.659 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:21.659 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:21.660 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:21.660 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.660 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:21.662 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.662 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.662 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:21.664 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.664 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.664 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:21.665 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.665 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.665 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:21.666 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.666 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.666 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:34:21.666 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.667 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.667 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:21.667 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.667 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.667 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:21.668 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.668 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:21.668 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:21.668 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:21.705 [http-nio-8080-exec-6] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:21.705 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:21.705 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:21.707 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:21.707 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:34:21.707 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:34:21.708 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:34:23.728 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:34:23.729 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:34:23.731 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:34:23.731 [http-nio-8080-exec-1] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:23.731 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:23.731 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:23.733 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:23.775 [http-nio-8080-exec-5] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:34:23.776 [http-nio-8080-exec-5] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:34:23.776 [http-nio-8080-exec-5] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:34:23.778 [http-nio-8080-exec-5] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:34:23.843 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:34:23.844 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:34:23.845 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:34:23.845 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:34:23.845 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:34:23.847 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:34:23.872 [http-nio-8080-exec-7] INFO  c.e.h.controller.FinanceController - 

=================== 获取财务详情 ===================
2025-05-30 16:34:23.872 [http-nio-8080-exec-7] INFO  c.e.h.controller.FinanceController - 收到前端参数: startDate=Thu May 01 00:00:00 CST 2025, endDate=Sat May 31 00:00:00 CST 2025
2025-05-30 16:34:23.873 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:23.873 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:23.873 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:23.874 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:23.874 [http-nio-8080-exec-7] INFO  c.e.h.controller.FinanceController - 获取到 8 条预订记录
2025-05-30 16:34:23.874 [http-nio-8080-exec-7] INFO  c.e.h.controller.FinanceController - 筛选出 8 条已付款预订
2025-05-30 16:34:23.874 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.874 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:23.875 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.875 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.875 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:23.876 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.876 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.876 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:23.876 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.876 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.878 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:23.878 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.878 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.878 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:34:23.879 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.879 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.879 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:23.880 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.880 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.880 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:23.881 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.881 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.881 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:23.881 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.882 [http-nio-8080-exec-7] DEBUG c.e.h.m.E.findByDateRange - ==>  Preparing: SELECT * FROM expense WHERE expense_date >= ? AND expense_date < ? ORDER BY expense_date DESC
2025-05-30 16:34:23.882 [http-nio-8080-exec-7] DEBUG c.e.h.m.E.findByDateRange - ==> Parameters: 2025-05-01 00:00:00.0(Timestamp), 2025-06-01 00:00:00.0(Timestamp)
2025-05-30 16:34:23.883 [http-nio-8080-exec-7] DEBUG c.e.h.m.E.findByDateRange - <==      Total: 12
2025-05-30 16:34:23.904 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:34:23.906 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:34:23.906 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:34:23.906 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:23.906 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:23.907 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:23.907 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:23.908 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:23.908 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:23.908 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:23.909 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:23.909 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:23.909 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:23.909 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:23.910 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:23.910 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:23.910 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:23.910 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:23.911 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:23.911 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:23.911 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:23.911 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:23.912 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:23.912 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:23.912 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:23.912 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:23.913 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:23.913 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:23.913 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:23.913 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:23.914 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:23.937 [http-nio-8080-exec-9] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:23.937 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:23.937 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:23.939 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:23.939 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.939 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:23.940 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.940 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.940 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:23.941 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.941 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.941 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:23.941 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.941 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.941 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:23.941 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.942 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.942 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:34:23.942 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.942 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.942 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:23.943 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.943 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.943 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:23.943 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.944 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.944 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:23.945 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.960 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询未同步到财务系统的已付款订单
2025-05-30 16:34:23.960 [http-nio-8080-exec-10] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==>  Preparing: SELECT * FROM booking WHERE payment_status IN ('PAID', 'paid', '已付款') AND (synced_to_finance IS NULL OR synced_to_finance = 0)
2025-05-30 16:34:23.960 [http-nio-8080-exec-10] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==> Parameters: 
2025-05-30 16:34:23.961 [http-nio-8080-exec-10] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - <==      Total: 0
2025-05-30 16:34:23.961 [http-nio-8080-exec-10] INFO  c.e.h.s.impl.BookingServiceImpl - 找到 0 个未同步到财务系统的已付款订单
2025-05-30 16:34:23.961 [http-nio-8080-exec-10] INFO  c.e.h.controller.FinanceController - 找到 0 条未同步的已付款预订记录
2025-05-30 16:34:23.982 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:23.982 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:23.982 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:23.985 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:23.985 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.985 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:23.987 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.988 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.988 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:23.988 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.989 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.989 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:23.989 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.989 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.990 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:23.990 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.990 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.990 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:34:23.991 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.991 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.991 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:23.991 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.992 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.992 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:23.992 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:23.992 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:23.993 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:23.994 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:24.012 [http-nio-8080-exec-4] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:24.012 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:24.012 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:24.013 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:24.014 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:34:24.014 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:34:24.015 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:34:34.118 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:34:34.118 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:34:34.119 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:34:34.119 [http-nio-8080-exec-6] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:34.119 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:34.119 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:34.121 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:34.147 [http-nio-8080-exec-1] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:34:34.147 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:34:34.147 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:34:34.148 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:34:34.164 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:34:34.164 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:34:34.165 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:34:34.165 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:34:34.165 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:34:34.166 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:34:34.202 [http-nio-8080-exec-3] INFO  c.e.h.controller.FinanceController - 

=================== 获取财务详情 ===================
2025-05-30 16:34:34.203 [http-nio-8080-exec-3] INFO  c.e.h.controller.FinanceController - 收到前端参数: startDate=Thu May 01 00:00:00 CST 2025, endDate=Sat May 31 00:00:00 CST 2025
2025-05-30 16:34:34.203 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:34.203 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:34.203 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:34.203 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:34.204 [http-nio-8080-exec-3] INFO  c.e.h.controller.FinanceController - 获取到 8 条预订记录
2025-05-30 16:34:34.204 [http-nio-8080-exec-3] INFO  c.e.h.controller.FinanceController - 筛选出 8 条已付款预订
2025-05-30 16:34:34.204 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.204 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:34.204 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.204 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.204 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:34.205 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.205 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.205 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:34.205 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.205 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.205 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:34.205 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.205 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.205 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:34:34.206 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.206 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.206 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:34.206 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.206 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.206 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:34.207 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.207 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.207 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:34.207 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.207 [http-nio-8080-exec-3] DEBUG c.e.h.m.E.findByDateRange - ==>  Preparing: SELECT * FROM expense WHERE expense_date >= ? AND expense_date < ? ORDER BY expense_date DESC
2025-05-30 16:34:34.207 [http-nio-8080-exec-3] DEBUG c.e.h.m.E.findByDateRange - ==> Parameters: 2025-05-01 00:00:00.0(Timestamp), 2025-06-01 00:00:00.0(Timestamp)
2025-05-30 16:34:34.208 [http-nio-8080-exec-3] DEBUG c.e.h.m.E.findByDateRange - <==      Total: 12
2025-05-30 16:34:34.262 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:34:34.262 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:34:34.263 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:34:34.263 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:34.263 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:34.263 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:34.264 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:34.264 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:34.264 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:34.264 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:34.264 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:34.264 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:34.264 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:34.264 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:34.265 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:34.265 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:34.265 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:34.265 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:34.266 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:34.266 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:34.266 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:34.266 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:34.267 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:34.267 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:34.267 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:34.267 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:34.268 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:34.268 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:34.268 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:34.268 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:34.269 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:34.283 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:34.283 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:34.283 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:34.284 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:34.284 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.284 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:34.285 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.285 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.285 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:34.285 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.285 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.285 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:34.285 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.286 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.286 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:34.286 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.286 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.286 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:34:34.286 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.286 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.286 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:34.287 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.287 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.287 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:34.287 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.287 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.287 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:34.287 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.303 [http-nio-8080-exec-9] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询未同步到财务系统的已付款订单
2025-05-30 16:34:34.304 [http-nio-8080-exec-9] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==>  Preparing: SELECT * FROM booking WHERE payment_status IN ('PAID', 'paid', '已付款') AND (synced_to_finance IS NULL OR synced_to_finance = 0)
2025-05-30 16:34:34.304 [http-nio-8080-exec-9] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==> Parameters: 
2025-05-30 16:34:34.304 [http-nio-8080-exec-9] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - <==      Total: 0
2025-05-30 16:34:34.304 [http-nio-8080-exec-9] INFO  c.e.h.s.impl.BookingServiceImpl - 找到 0 个未同步到财务系统的已付款订单
2025-05-30 16:34:34.304 [http-nio-8080-exec-9] INFO  c.e.h.controller.FinanceController - 找到 0 条未同步的已付款预订记录
2025-05-30 16:34:34.318 [http-nio-8080-exec-10] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:34.318 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:34.318 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:34.319 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:34.319 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.319 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:34.320 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.320 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.320 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:34.320 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.320 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.320 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:34.321 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.321 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.321 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:34.321 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.321 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.321 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:34:34.321 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.321 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.321 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:34.322 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.322 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.322 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:34.322 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.322 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:34.322 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:34.322 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:34.333 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:34.333 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:34.333 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:34.334 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:34.334 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:34:34.334 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:34:34.335 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:34:35.247 [http-nio-8080-exec-4] INFO  c.e.h.controller.FinanceController - 获取到10条收入记录
2025-05-30 16:34:35.265 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==>  Preparing: SELECT * FROM expense ORDER BY expense_date DESC
2025-05-30 16:34:35.265 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==> Parameters: 
2025-05-30 16:34:35.266 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.ExpenseMapper.findAll - <==      Total: 12
2025-05-30 16:34:35.315 [http-nio-8080-exec-5] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:35.315 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:35.315 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:35.316 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:35.316 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:35.316 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:35.316 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:35.316 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:35.316 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:35.317 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:35.317 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:35.317 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:35.317 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:35.317 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:35.317 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:35.318 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:35.318 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:35.318 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:34:35.318 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:35.318 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:35.318 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:34:35.318 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:35.319 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:35.319 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:34:35.319 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:35.319 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:34:35.319 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:34:35.319 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:34:35.341 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:34:35.341 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:34:35.341 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:34:35.342 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:34:35.342 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:34:35.342 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:34:35.343 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:36:54.339 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:36:54.340 [http-nio-8080-exec-7] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:36:54.341 [http-nio-8080-exec-7] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:36:54.341 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:36:54.341 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:36:54.343 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:36:54.343 [http-nio-8080-exec-7] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:36:54.350 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:36:54.350 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:36:54.351 [http-nio-8080-exec-9] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:36:57.432 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:36:57.432 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:36:57.433 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:36:57.440 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:36:57.440 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:36:57.441 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:36:57.442 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:36:57.442 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:36:57.442 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:36:57.443 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:36:57.443 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:36:57.443 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:36:57.444 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:36:57.444 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:36:57.444 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:36:57.445 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:36:57.445 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:36:57.445 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:36:57.458 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:36:57.458 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:36:57.458 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:36:57.458 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:36:57.460 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:36:57.460 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:36:57.461 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:36:57.461 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:36:57.461 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:36:57.461 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:36:57.462 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:36:57.462 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:36:57.462 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:36:57.462 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:36:57.463 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:36:59.143 [http-nio-8080-exec-6] INFO  c.e.h.controller.FinanceController - 获取到10条收入记录
2025-05-30 16:36:59.169 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==>  Preparing: SELECT * FROM expense ORDER BY expense_date DESC
2025-05-30 16:36:59.170 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.ExpenseMapper.findAll - ==> Parameters: 
2025-05-30 16:36:59.171 [http-nio-8080-exec-1] DEBUG c.e.h.mapper.ExpenseMapper.findAll - <==      Total: 12
2025-05-30 16:36:59.214 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:36:59.214 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:36:59.215 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:36:59.216 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:36:59.216 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:36:59.216 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:36:59.217 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:36:59.218 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:36:59.218 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:36:59.219 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:36:59.219 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:36:59.219 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:36:59.220 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:36:59.220 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:36:59.220 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:36:59.220 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:36:59.220 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:36:59.220 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:36:59.222 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:36:59.222 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:36:59.222 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:36:59.222 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:36:59.222 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:36:59.222 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:36:59.223 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:36:59.223 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:36:59.223 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:36:59.224 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:36:59.247 [http-nio-8080-exec-8] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:36:59.247 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:36:59.247 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:36:59.248 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:36:59.249 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:36:59.249 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:36:59.250 [http-nio-8080-exec-8] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:37:01.427 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:37:01.427 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:37:01.427 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:37:01.427 [http-nio-8080-exec-7] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:37:01.427 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:37:01.427 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:37:01.428 [http-nio-8080-exec-7] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:37:01.448 [http-nio-8080-exec-9] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单详细信息
2025-05-30 16:37:01.449 [http-nio-8080-exec-9] DEBUG c.e.h.m.B.findAllWithDetails - ==>  Preparing: SELECT b.id, b.customer_id AS customerId, b.room_id AS roomId, b.checkin_date AS checkinDate, b.checkout_date AS checkoutDate, b.status, b.payment_status AS paymentStatus, b.total_price AS totalPrice, b.create_time AS createTime, c.name AS customerName, r.room_number AS roomNumber FROM booking b LEFT JOIN customer c ON b.customer_id = c.id LEFT JOIN room r ON b.room_id = r.id
2025-05-30 16:37:01.449 [http-nio-8080-exec-9] DEBUG c.e.h.m.B.findAllWithDetails - ==> Parameters: 
2025-05-30 16:37:01.450 [http-nio-8080-exec-9] DEBUG c.e.h.m.B.findAllWithDetails - <==      Total: 8
2025-05-30 16:37:01.466 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:37:01.467 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:37:01.468 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:37:01.469 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==>  Preparing: SELECT c.*, (SELECT COUNT(*) FROM booking b WHERE b.customer_id = c.id) AS visits, (SELECT SUM(total_price) FROM booking b WHERE b.customer_id = c.id AND (b.payment_status = 'paid' OR b.payment_status = '已付款')) AS spent FROM customer c
2025-05-30 16:37:01.469 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - ==> Parameters: 
2025-05-30 16:37:01.470 [http-nio-8080-exec-10] DEBUG c.e.h.mapper.CustomerMapper.findAll - <==      Total: 9
2025-05-30 16:37:01.492 [http-nio-8080-exec-2] INFO  c.e.h.controller.FinanceController - 

=================== 获取财务详情 ===================
2025-05-30 16:37:01.492 [http-nio-8080-exec-2] INFO  c.e.h.controller.FinanceController - 收到前端参数: startDate=Thu May 01 00:00:00 CST 2025, endDate=Sat May 31 00:00:00 CST 2025
2025-05-30 16:37:01.492 [http-nio-8080-exec-2] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:37:01.492 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:37:01.492 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:37:01.492 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:37:01.492 [http-nio-8080-exec-2] INFO  c.e.h.controller.FinanceController - 获取到 8 条预订记录
2025-05-30 16:37:01.492 [http-nio-8080-exec-2] INFO  c.e.h.controller.FinanceController - 筛选出 8 条已付款预订
2025-05-30 16:37:01.492 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.492 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:37:01.492 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.493 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.493 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:37:01.493 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.493 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.493 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:37:01.495 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.496 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.496 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:37:01.496 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.496 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.496 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:37:01.497 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.497 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.497 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:37:01.497 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.498 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.498 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:37:01.499 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.499 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.499 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:37:01.500 [http-nio-8080-exec-2] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.501 [http-nio-8080-exec-2] DEBUG c.e.h.m.E.findByDateRange - ==>  Preparing: SELECT * FROM expense WHERE expense_date >= ? AND expense_date < ? ORDER BY expense_date DESC
2025-05-30 16:37:01.501 [http-nio-8080-exec-2] DEBUG c.e.h.m.E.findByDateRange - ==> Parameters: 2025-05-01 00:00:00.0(Timestamp), 2025-06-01 00:00:00.0(Timestamp)
2025-05-30 16:37:01.502 [http-nio-8080-exec-2] DEBUG c.e.h.m.E.findByDateRange - <==      Total: 12
2025-05-30 16:37:01.531 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:37:01.531 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:37:01.531 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
2025-05-30 16:37:01.531 [http-nio-8080-exec-4] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:37:01.531 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:37:01.531 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:37:01.532 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:37:01.532 [http-nio-8080-exec-4] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:37:01.532 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:37:01.532 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:37:01.532 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:37:01.532 [http-nio-8080-exec-4] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:37:01.532 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:37:01.532 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:37:01.533 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:37:01.533 [http-nio-8080-exec-4] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:37:01.533 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:37:01.533 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:37:01.534 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:37:01.534 [http-nio-8080-exec-4] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:37:01.534 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:37:01.534 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:37:01.535 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:37:01.535 [http-nio-8080-exec-4] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:37:01.535 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:37:01.535 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:37:01.535 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:37:01.535 [http-nio-8080-exec-4] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:37:01.535 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:37:01.535 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:37:01.535 [http-nio-8080-exec-4] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:37:01.560 [http-nio-8080-exec-6] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:37:01.561 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:37:01.561 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:37:01.562 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:37:01.562 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.562 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:37:01.563 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.563 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.563 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:37:01.563 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.563 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.563 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:37:01.564 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.564 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.564 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:37:01.564 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.564 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.564 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:37:01.564 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.564 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.564 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:37:01.564 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.565 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.565 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:37:01.566 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.566 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.566 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:37:01.566 [http-nio-8080-exec-6] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.587 [http-nio-8080-exec-1] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询未同步到财务系统的已付款订单
2025-05-30 16:37:01.587 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==>  Preparing: SELECT * FROM booking WHERE payment_status IN ('PAID', 'paid', '已付款') AND (synced_to_finance IS NULL OR synced_to_finance = 0)
2025-05-30 16:37:01.587 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - ==> Parameters: 
2025-05-30 16:37:01.588 [http-nio-8080-exec-1] DEBUG c.e.h.m.B.findUnsyncedPaidBookings - <==      Total: 0
2025-05-30 16:37:01.588 [http-nio-8080-exec-1] INFO  c.e.h.s.impl.BookingServiceImpl - 找到 0 个未同步到财务系统的已付款订单
2025-05-30 16:37:01.588 [http-nio-8080-exec-1] INFO  c.e.h.controller.FinanceController - 找到 0 条未同步的已付款预订记录
2025-05-30 16:37:01.615 [http-nio-8080-exec-5] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:37:01.615 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:37:01.615 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:37:01.616 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:37:01.616 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.616 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:37:01.616 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.616 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.616 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:37:01.616 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.617 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.617 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:37:01.617 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.617 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.617 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:37:01.617 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.617 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.617 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 4(Integer)
2025-05-30 16:37:01.617 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.617 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.617 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 3(Integer)
2025-05-30 16:37:01.617 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.618 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.618 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 2(Integer)
2025-05-30 16:37:01.618 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.618 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==>  Preparing: SELECT * FROM room WHERE id = ?
2025-05-30 16:37:01.618 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - ==> Parameters: 1(Integer)
2025-05-30 16:37:01.618 [http-nio-8080-exec-5] DEBUG c.e.h.mapper.RoomMapper.findById - <==      Total: 1
2025-05-30 16:37:01.644 [http-nio-8080-exec-3] DEBUG c.e.h.s.impl.BookingServiceImpl - 查询所有订单
2025-05-30 16:37:01.644 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==>  Preparing: SELECT * FROM booking
2025-05-30 16:37:01.644 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - ==> Parameters: 
2025-05-30 16:37:01.645 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.BookingMapper.findAll - <==      Total: 8
2025-05-30 16:37:01.645 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - ==>  Preparing: SELECT * FROM room
2025-05-30 16:37:01.645 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - ==> Parameters: 
2025-05-30 16:37:01.646 [http-nio-8080-exec-3] DEBUG c.e.h.mapper.RoomMapper.findAll - <==      Total: 4
